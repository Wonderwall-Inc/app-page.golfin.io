import { useEffect, useState } from "react";

export const GooglePlayButton = () => {
  const [isAndroid, setIsAndroid] = useState(false);

  useEffect(() => {
    const userAgent = navigator.userAgent || '';
    setIsAndroid(/Android/i.test(userAgent));
  }, []);

  const handleClick = (e: React.MouseEvent<HTMLAnchorElement>) => {
    e.preventDefault();

    const packageName = 'com.nextinnovation.golfingame';
    const deepLink = `market://details?id=${packageName}`;
    const webLink = `https://play.google.com/store/apps/details?id=${packageName}`;

    if (isAndroid) {
      window.location.href = deepLink;

      // Fallback after 1 second
      setTimeout(() => {
        window.location.href = webLink;
      }, 1000);
    } else {
      // Non-Android: just go to web link
      window.location.href = webLink;
    }
  };

  return (
    <a href="https://play.google.com/store/apps/details?id=com.nextinnovation.golfingame" onClick={handleClick}>
      <svg xmlns="http://www.w3.org/2000/svg" width="121" height="36" viewBox="0 0 121 36" fill="none">
        <path d="M116.121 0H4.46619C1.99958 0 0 1.99958 0 4.46619V31.2633C0 33.73 1.99958 35.7295 4.46619 35.7295H116.121C118.588 35.7295 120.587 33.73 120.587 31.2633V4.46619C120.587 1.99958 118.588 0 116.121 0Z" fill="black" />
        <path d="M116.121 0.714656C118.19 0.714656 119.873 2.3977 119.873 4.46644V31.2636C119.873 33.3322 118.19 35.0154 116.121 35.0154H4.46619C2.39745 35.0154 0.714591 33.3322 0.714591 31.2636V4.46644C0.714591 2.3977 2.39745 0.714656 4.46619 0.714656H116.121ZM116.121 0.000244141H4.46619C2.00979 0.000244141 0 2.01003 0 4.46644V31.2636C0 33.72 2.00979 35.7298 4.46619 35.7298H116.121C118.577 35.7298 120.587 33.72 120.587 31.2636V4.46644C120.587 2.01003 118.577 0.000244141 116.121 0.000244141Z" fill="#A6A6A6" />
        <path d="M42.3562 9.14973C42.3562 9.89817 42.1346 10.4943 41.6906 10.9388C41.1865 11.4674 40.5296 11.7317 39.7218 11.7317C38.9481 11.7317 38.2904 11.4639 37.7495 10.9274C37.2079 10.391 36.9375 9.72586 36.9375 8.93249C36.9375 8.13867 37.2079 7.47401 37.7495 6.93753C38.2904 6.40105 38.9481 6.13281 39.7218 6.13281C40.1056 6.13281 40.4729 6.20785 40.8218 6.35746C41.1707 6.50753 41.4508 6.70681 41.6601 6.95629L41.189 7.42774C40.8341 7.00381 40.3456 6.79184 39.7218 6.79184C39.1575 6.79184 38.6698 6.98988 38.2582 7.38674C37.8464 7.7837 37.6406 8.29874 37.6406 8.93249C37.6406 9.56624 37.8464 10.0813 38.2582 10.4782C38.6698 10.8751 39.1575 11.0731 39.7218 11.0731C40.3203 11.0731 40.8192 10.8738 41.2187 10.4748C41.4778 10.2147 41.6278 9.85324 41.6679 9.38911H39.7218V8.74536H42.3187C42.344 8.88542 42.3562 9.01976 42.3562 9.14973Z" fill="white" stroke="white" stroke-width="0.2" stroke-miterlimit="10" />
        <path d="M46.4737 6.91139H44.033V8.6106H46.2338V9.25445H44.033V10.9537H46.4737V11.6122H43.3447V6.25281H46.4737V6.91139Z" fill="white" stroke="white" stroke-width="0.2" stroke-miterlimit="10" />
        <path d="M49.3774 11.6122H48.6883V6.91139H47.1914V6.25281H50.8743V6.91139H49.3774V11.6122Z" fill="white" stroke="white" stroke-width="0.2" stroke-miterlimit="10" />
        <path d="M53.5391 11.6122V6.25281H54.2273V11.6122H53.5391Z" fill="white" stroke="white" stroke-width="0.2" stroke-miterlimit="10" />
        <path d="M57.2816 11.6122H56.5925V6.91139H55.0957V6.25281H58.7785V6.91139H57.2816V11.6122Z" fill="white" stroke="white" stroke-width="0.2" stroke-miterlimit="10" />
        <path d="M65.7504 10.9196C65.2235 11.4613 64.5684 11.7317 63.7851 11.7317C63.0017 11.7317 62.3466 11.4613 61.8207 10.9196C61.2938 10.3784 61.0312 9.71586 61.0312 8.93249C61.0312 8.14912 61.2938 7.48661 61.8207 6.94539C62.3466 6.40364 63.0017 6.13281 63.7851 6.13281C64.5641 6.13281 65.2174 6.40498 65.7469 6.94888C66.2755 7.49277 66.5399 8.15394 66.5399 8.93249C66.5399 9.71586 66.2763 10.3784 65.7504 10.9196ZM62.3292 10.4708C62.7261 10.8725 63.2111 11.0731 63.7851 11.0731C64.3591 11.0731 64.8449 10.8725 65.241 10.4708C65.6379 10.0691 65.8368 9.55615 65.8368 8.93249C65.8368 8.30883 65.6379 7.79584 65.241 7.39415C64.8449 6.99247 64.3591 6.79184 63.7851 6.79184C63.2111 6.79184 62.7261 6.99247 62.3292 7.39415C61.9331 7.79584 61.7343 8.30883 61.7343 8.93249C61.7343 9.55615 61.9331 10.0691 62.3292 10.4708Z" fill="white" stroke="white" stroke-width="0.2" stroke-miterlimit="10" />
        <path d="M67.5068 11.6122V6.25281H68.3451L70.9498 10.422H70.9795L70.9498 9.38915V6.25281H71.639V11.6122H70.9202L68.1951 7.24109H68.1654L68.1951 8.27394V11.6122H67.5068Z" fill="white" stroke="white" stroke-width="0.2" stroke-miterlimit="10" />
        <path d="M60.8617 19.4295C58.7607 19.4295 57.0482 21.0268 57.0482 23.2285C57.0482 25.4159 58.7607 27.0276 60.8617 27.0276C62.9627 27.0276 64.6752 25.4159 64.6752 23.2285C64.6752 21.0268 62.9627 19.4295 60.8617 19.4295ZM60.8617 25.531C59.7105 25.531 58.7175 24.5812 58.7175 23.2285C58.7175 21.8614 59.7105 20.9261 60.8617 20.9261C62.0129 20.9261 63.0059 21.8614 63.0059 23.2285C63.0059 24.5812 62.0129 25.531 60.8617 25.531ZM52.5427 19.4295C50.4416 19.4295 48.7291 21.0268 48.7291 23.2285C48.7291 25.4159 50.4416 27.0276 52.5427 27.0276C54.6436 27.0276 56.3561 25.4159 56.3561 23.2285C56.3561 21.0268 54.6436 19.4295 52.5427 19.4295ZM52.5427 25.531C51.3914 25.531 50.3984 24.5812 50.3984 23.2285C50.3984 21.8614 51.3914 20.9261 52.5427 20.9261C53.6939 20.9261 54.6868 21.8614 54.6868 23.2285C54.6868 24.5812 53.6939 25.531 52.5427 25.531ZM42.6466 20.5952V22.2068H46.5034C46.3882 23.1135 46.0861 23.7754 45.6255 24.2359C45.0643 24.7971 44.1864 25.4159 42.6466 25.4159C40.2722 25.4159 38.4159 23.5019 38.4159 21.1275C38.4159 18.7531 40.2722 16.8392 42.6466 16.8392C43.9275 16.8392 44.8629 17.3429 45.5536 17.9904L46.6904 16.8536C45.7263 15.9326 44.4455 15.2274 42.6466 15.2274C39.3944 15.2274 36.6602 17.8753 36.6602 21.1275C36.6602 24.3798 39.3944 27.0276 42.6466 27.0276C44.4023 27.0276 45.7263 26.452 46.7623 25.3727C47.8272 24.3078 48.1583 22.8113 48.1583 21.6025C48.1583 21.2283 48.1295 20.883 48.0718 20.5952H42.6466ZM83.1178 21.847C82.8012 20.998 81.837 19.4295 79.8655 19.4295C77.9084 19.4295 76.2823 20.9692 76.2823 23.2285C76.2823 25.3583 77.894 27.0276 80.0526 27.0276C81.7938 27.0276 82.8012 25.9627 83.2184 25.344L81.9233 24.4806C81.4916 25.1137 80.9016 25.531 80.0526 25.531C79.2035 25.531 78.5991 25.1425 78.2106 24.3798L83.2905 22.2788L83.1178 21.847ZM77.9372 23.1135C77.894 21.6456 79.0741 20.8973 79.923 20.8973C80.5851 20.8973 81.1463 21.2283 81.3333 21.7032L77.9372 23.1135ZM73.8071 26.7974H75.4764V15.6304H73.8071V26.7974ZM71.0729 20.2785H71.0154C70.6412 19.8324 69.9217 19.4295 69.015 19.4295C67.1156 19.4295 65.3743 21.0988 65.3743 23.2429C65.3743 25.3727 67.1156 27.0276 69.015 27.0276C69.9217 27.0276 70.6412 26.6247 71.0154 26.1642H71.0729V26.7111C71.0729 28.1645 70.2959 28.9416 69.0438 28.9416C68.0222 28.9416 67.3889 28.2077 67.1299 27.5889L65.6765 28.1933C66.0938 29.2006 67.2019 30.4382 69.0438 30.4382C71.001 30.4382 72.6559 29.287 72.6559 26.4808V19.6597H71.0729V20.2785ZM69.159 25.531C68.0078 25.531 67.0436 24.5669 67.0436 23.2429C67.0436 21.9046 68.0078 20.9261 69.159 20.9261C70.2959 20.9261 71.188 21.9046 71.188 23.2429C71.188 24.5669 70.2959 25.531 69.159 25.531ZM90.9371 15.6306H86.9432V26.7974H88.6097V22.5666H90.9371C92.7847 22.5666 94.6004 21.2292 94.6004 19.0986C94.6004 16.9681 92.7847 15.6306 90.9371 15.6306ZM90.9801 21.0126H88.6097V17.1848H90.9801C92.2263 17.1848 92.9339 18.2166 92.9339 19.0986C92.9339 19.9641 92.2263 21.0126 90.9801 21.0126ZM101.281 19.4089C100.074 19.4089 98.824 19.9405 98.3068 21.1185L99.7866 21.7363C100.103 21.1185 100.692 20.9173 101.309 20.9173C102.171 20.9173 103.048 21.4345 103.062 22.3539V22.4689C102.76 22.2965 102.114 22.0379 101.324 22.0379C99.7291 22.0379 98.1058 22.9143 98.1058 24.552C98.1058 26.0461 99.413 27.0086 100.878 27.0086C101.999 27.0086 102.617 26.5058 103.005 25.9168H103.062V26.7788H104.671V22.4977C104.671 20.5151 103.191 19.4089 101.281 19.4089ZM101.08 25.5289C100.534 25.5289 99.7722 25.256 99.7722 24.5807C99.7722 23.7188 100.72 23.3883 101.539 23.3883C102.272 23.3883 102.617 23.5464 103.062 23.7619C102.933 24.7962 102.042 25.5289 101.08 25.5289ZM110.532 19.6531L108.622 24.4945H108.564L106.582 19.6531H104.786L107.76 26.4196L106.065 30.1835H107.803L112.386 19.6531H110.532ZM95.5198 26.7974H97.1863V15.6306H95.5198V26.7974Z" fill="white" />
        <path d="M18.506 17.3505L8.99609 27.444C8.99666 27.4461 8.99702 27.4482 8.99758 27.4502C9.28935 28.546 10.2902 29.3532 11.4784 29.3532C11.9531 29.3532 12.3991 29.2247 12.7816 28.9995L12.8118 28.9814L23.5163 22.8049L18.506 17.3505Z" fill="#EA4335" />
        <path d="M28.1259 15.6318L28.1169 15.6257L23.4955 12.9463L18.2891 17.5797L23.5139 22.8036L28.1108 20.1512C28.9166 19.7158 29.4639 18.8664 29.4639 17.8869C29.4639 16.9135 28.9242 16.0686 28.1259 15.6318Z" fill="#FBBC04" />
        <path d="M8.99432 8.28687C8.9373 8.49772 8.90723 8.71904 8.90723 8.9479V26.7837C8.90723 27.0127 8.93709 27.2343 8.99493 27.4441L18.8319 17.6089L8.99432 8.28687Z" fill="#4285F4" />
        <path d="M18.5758 17.8657L23.4976 12.9449L12.8054 6.74559C12.4169 6.51282 11.9634 6.3783 11.4781 6.3783C10.2898 6.3783 9.28749 7.18695 8.99572 8.2843C8.99549 8.28514 8.99535 8.28601 8.99512 8.28685L18.5758 17.8657Z" fill="#34A853" />
      </svg>
    </a >
  )
}